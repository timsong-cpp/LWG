<?xml version='1.0' encoding='utf-8' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd">

<issue num="4052" status="New">
<title>Bogus requirement for <code>piecewise_linear_distribution</code></title>
<section>
<sref ref="[rand.dist.samp.pconst]"/>
<sref ref="[rand.dist.samp.plinear]"/>
</section>
<submitter>Jonathan Wakely</submitter>
<date>05 Feb 2024</date>
<priority>99</priority>

<discussion>
<p>
In the second constructor of <sref ref="[rand.dist.samp.plinear]"/>,
<paper num="P1719R2"/> replaced:

<blockquote>
<pre><code>
template&lt;class InputIteratorB, class InputIteratorW&gt;
  piecewise_linear_distribution(InputIteratorB firstB, InputIteratorB lastB,
                                InputIteratorW firstW);
</code></pre>
<p>
<em>Effects</em>: [...] Moreover, the <em>id-expressions</em>
<code>iterator_traits&lt;InputIteratorB&gt;::value_type</code>
and
<code>iterator_traits&lt;InputIteratorW&gt;::value_type</code>
shall each denote a type that is convertible to
<code>double</code>.
</p>
</blockquote>
with
<blockquote>
<pre><code>
template&lt;class InputIteratorB, class InputIteratorW&gt;
  piecewise_linear_distribution(InputIteratorB firstB, InputIteratorB lastB,
                                InputIteratorW firstW);
</code></pre>
<p>
<em>Mandates</em>: 
<code>is_invocable_r_v&lt;double, UnaryOperation&amp;, double&gt;</code>
is <code>true</code>.
</p>
<p><em>Effects</em>: [...]</p>

</blockquote>
</p>
<p>
This was a copy &amp; paste error from the next constructor,
and was obviously not intended. There is no <code>UnaryOperation</code>
in that constructor.
</p>
<p>A less obviously wrong issue is the use of <code>double</code> there
in the first place. Shouldn't it be <code>RealType</code> instead?
That seems to be incorrect throughout both
<sref ref="[rand.dist.samp.pconst]"/>
and
<sref ref="[rand.dist.samp.plinear]"/>,
and was only partially fixed by LWG <iref ref="1439"/>.
</p>
</discussion>

<resolution>
<p>
</p>
</resolution>

</issue>
